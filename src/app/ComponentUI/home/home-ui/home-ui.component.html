<div class="content-body">
  <!-- Left Sidebar -->
  <div class="left-sidebar">
    <ng-container *ngIf="isLoading">
      <mat-card class="post-box-container">

        <mat-card-title class="skeleton-line medium"></mat-card-title>
        <mat-card-subtitle class="skeleton-line medium"></mat-card-subtitle>
        <mat-card-title class="skeleton-line medium"></mat-card-title>
        <mat-card-subtitle class="skeleton-line medium"></mat-card-subtitle>

        <mat-card-content class="scrollable-content">
          <div class="button-gap">
            <div class="skeleton-btn medium"></div>
            <div class="skeleton-btn medium"></div>
          </div>
          <div class="button-gap">
            <div class="skeleton-btn medium"></div>
            <div class="skeleton-btn medium"></div>
          </div>
        </mat-card-content>
      </mat-card>
    </ng-container>

    <!-- Actual Profile Card -->
    <mat-card class="left-column" *ngIf="!isLoading && !isMobile">
      <div class="profile-avatar">
        <div class="avatar-container">
          <img *ngIf="profile_pic; else defaultAvatar" [src]="profile_pic.photo_pic" alt="Profile Picture"
            class="profile-pic" />
          <ng-template #defaultAvatar>
            <img src="assets/images/default.png" alt="Default Avatar" class="profile-pic" />
          </ng-template>

          <div class="edit-overlay" (click)="uploadPic()">
            <mat-icon>photo_camera</mat-icon>
          </div>
        </div>
        <p *ngIf="error" class="error-message">{{ error }}</p>
      </div>

      <!-- User Info -->
      <mat-card-title class="profile-name" *ngIf="showDefUserButtons">
        {{ profiles.fname }} {{ profiles.lname }}
      </mat-card-title>
      <mat-card-subtitle class="profile-profession" *ngIf="showDefUserButtons">
        {{ profiles.profession }}
      </mat-card-subtitle>

      <mat-card-title class="profile-name" *ngIf="showClientOrAdminButtons">
        {{ profiles.company }}
      </mat-card-title>
      <mat-card-subtitle class="profile-profession" *ngIf="showClientOrAdminButtons">
        {{ profiles.companywebsite }}
      </mat-card-subtitle>

      <mat-card-content class="scrollable-content">
        <!-- Buttons -->
        <div class="button-gap" *ngIf="showDefUserButtons">
          <button mat-button class="list-label" [routerLink]="['/profile/', profiles.code]">
            <mat-icon>person</mat-icon> View Profile
          </button>
          <button mat-button class="list-label" (click)="printCV()">
            <mat-icon>description</mat-icon> View CV
          </button>
        </div>

        <div class="button-gap" *ngIf="showClientOrAdminButtons">
          <button mat-button class="list-label" [routerLink]="['/client_profile/', profiles.code]">
            <mat-icon>person</mat-icon> View Profile
          </button>
          <button mat-button class="list-label">
            <mat-icon>description</mat-icon> View Jobs
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
  <!-- public post -->
  <app-post-feeds></app-post-feeds>

  <!-- Right Sidebar -->
  <div class="right-column" *ngIf="!isMobile">
    <mat-card-header>
      <mat-card-title>Suggested History</mat-card-title>
    </mat-card-header>
    <ng-container *ngIf="isLoading">
      <div *ngFor="let item of skeletonUsers" class="client-item skeleton-user">
        <div class="skeleton-avatar"></div>
        <div class="skeleton-info">
          <div class="skeleton-line short"></div>
          <div class="skeleton-line shorter"></div>
        </div>
        <div class="skeleton-btn small"></div>
      </div>
    </ng-container>

    <!-- User Suggestions -->
    <div *ngIf="!isLoading && users && users.length > 0; else noData">
      <div *ngFor="let user of users" class="client-item">
        <!-- Profile Image -->
        <div class="profile-image-container">
          <img [src]="user.photo_pic || 'assets/images/default.png'" [alt]="user.fullname" class="client-photo" />
        </div>

        <!-- User Info -->
        <div class="client-info">
          <h3 class="client-name">
            <a [routerLink]="user.role_code === 'DEF-USERS'? ['/profile', user.code]: ['/client_profile', user.code]"
              class="custom-title"> {{ user.fullname }}</a>
          </h3>
          <p class="client-profession">
            {{ user.profession || 'No profession listed' }}
          </p>
        </div>

        <!-- Action Button -->
        <div class="client-action" *ngIf="currentUserCode !== user.code">
          <button mat-flat-button
            [color]=" user.follow_status === 'accepted' ? 'accent': user.follow_status === 'pending'? 'warn': 'primary'"
            (click)="AddConnect(user.code, user.fullname, user.follow_status, user.id)">
            <mat-icon *ngIf="user.follow_status === 'not_following'">
              person_add
            </mat-icon>
            <mat-icon *ngIf="user.follow_status === 'pending'" class="hourglass-animated">hourglass_top</mat-icon>
            <mat-icon *ngIf="user.follow_status === 'accepted'">
              check_circle
            </mat-icon>

            <span class="btn-label">
              {{
              user.follow_status === 'not_following'
              ? 'Connect'
              : user.follow_status === 'pending'
              ? 'Pending'
              : 'Connected'
              }}
            </span>
          </button>
        </div>
      </div>
    </div>
    <ng-template #noData>
      <p class="no-data-text" *ngIf="!isLoading">
        No suggested history available.
      </p>
    </ng-template>

    <div class="spacer-top"></div>
  </div>