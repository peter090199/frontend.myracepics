<div class="search-div" style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">

  <!-- Search Input -->
  <mat-form-field class="w-40" appearance="standard" floatLabel="never">
    <input matInput [(ngModel)]="searchKey" [placeholder]="placeHolder" (keyup)="applyFilter()" autocomplete="off" />
    <button *ngIf="searchKey" mat-icon-button matSuffix aria-label="Clear" (click)="clearSearch()">
      <mat-icon>close</mat-icon>
    </button>
  </mat-form-field>

  <!-- Status Filter Dropdown -->
  <mat-form-field appearance="standard" class="w-20">
    <mat-label>Status</mat-label>
    <mat-select [(ngModel)]="selectedStatus" (selectionChange)="applyFilter()">
      <mat-option value="">All</mat-option>
      <mat-option *ngFor="let status of statuses" [value]="status">{{ status | titlecase }}</mat-option>
    </mat-select>
  </mat-form-field>

  <button mat-raised-button color="accent" (click)="onClickView()">View</button>

</div>

<div class="candidate-wrapper">
  <mat-table [dataSource]="dataSource" matSort class="mat-elevation-z4">
    <!-- Candidate -->
    <ng-container matColumnDef="fullname">
      <mat-header-cell *matHeaderCellDef mat-sort-header>Candidates</mat-header-cell>
      <mat-cell *matCellDef="let job">{{ job.fullname }}</mat-cell>
    </ng-container>

    <!-- Job -->
    <ng-container matColumnDef="job_name">
      <mat-header-cell *matHeaderCellDef mat-sort-header>Jobs</mat-header-cell>
      <mat-cell *matCellDef="let job">{{ job.job_name }}</mat-cell>
    </ng-container>

    <!-- Status -->
    <ng-container matColumnDef="applied_status">
      <mat-header-cell *matHeaderCellDef mat-sort-header>Status</mat-header-cell>
      <mat-cell *matCellDef="let job">
        <span class="status" [ngClass]="job.applied_status.toLowerCase()" style="font-weight:bold">
          {{ job.applied_status }}
        </span>
      </mat-cell>
    </ng-container>

    <!-- Actions -->
    <ng-container matColumnDef="actions">
      <mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>
      <mat-cell *matCellDef="let job" style="display:flex; gap:6px; padding-left:0">
        <!-- <button mat-icon-button color="accent" matTooltip="Schedule Interview"
                *ngIf="job.applied_status.toLowerCase() !== 'interview'"
                (click)="scheduleInterview(job)">
          <mat-icon>event</mat-icon>
        </button> -->
        <!-- <button mat-icon-button matTooltip="View CV" (click)="viewResume(job)">
          <mat-icon>description</mat-icon>
        </button> -->
        <button mat-icon-button color="warn" matTooltip="Decline">
          <mat-icon>remove_circle_outline</mat-icon>
        </button>
      </mat-cell>
    </ng-container>

    <!-- No Data -->
    <ng-container matColumnDef="noData">
      <mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns.length" class="text-center">
        No candidates found.
      </mat-footer-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns:displayedColumns"></mat-row>
    <mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{ hide: dataSource.data.length > 0 }"></mat-footer-row>

  </mat-table>

  <mat-progress-bar *ngIf="isLoading" mode="indeterminate" color="primary"></mat-progress-bar>

  <mat-paginator [pageSize]="10" [pageSizeOptions]="[10,20,30]" showFirstLastButtons></mat-paginator>
</div>