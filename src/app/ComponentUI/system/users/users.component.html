<section class="default-width content-scrollable">
  <div class="search-div">
    <mat-form-field class="w-40" floatLabel="never" appearance="standard">
      <input matInput [(ngModel)]="searchKey" [placeholder]="placeHolder" (keyup)="applyFilter()" autocomplete="false">
      <button mat-button matSuffix mat-icon-button aria-label="Clear" (click)="clearSearch()">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>



    <button type="button" mat-raised-button color="primary" (click)="viewUsers()">
      <mat-icon>add_circle</mat-icon> View
    </button>
    
    <mat-form-field appearance="standard" class="w-20">
      <mat-label>Filter Role</mat-label>
      <mat-select [(value)]="selectedRole" (selectionChange)="applyFilter()">
        <mat-option value="">All Roles</mat-option>
        <mat-option *ngFor="let role of roleCodes" [value]="role">{{role}}</mat-option>
      </mat-select>
    </mat-form-field>
    
  </div>


  <mat-table [dataSource]="dataSource" class="mat-elevation-z4" matSort>
    <!-- ID Column -->
    <ng-container matColumnDef="id">
      <mat-header-cell *matHeaderCellDef mat-sort-header> ID </mat-header-cell>
      <mat-cell *matCellDef="let user"> {{user.id}} </mat-cell>
    </ng-container>

    <!-- Full Name Column -->
    <ng-container matColumnDef="fullname">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Full Name </mat-header-cell>
      <mat-cell *matCellDef="let user"> {{user.fullname}} </mat-cell>
    </ng-container>

    <!-- Email Column -->
    <ng-container matColumnDef="email">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Email </mat-header-cell>
      <mat-cell *matCellDef="let user"> {{user.email}} </mat-cell>
    </ng-container>

    <!-- Contact Column -->
    <ng-container matColumnDef="contactno">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Contact No </mat-header-cell>
      <mat-cell *matCellDef="let user"> {{user.contactno}} </mat-cell>
    </ng-container>

    <!-- Company Column -->
    <ng-container matColumnDef="company">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Company </mat-header-cell>
      <mat-cell *matCellDef="let user"> {{user.company || '-' }} </mat-cell>
    </ng-container>

    <!-- Status Column -->
    <ng-container matColumnDef="status">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Status </mat-header-cell>
      <mat-cell *matCellDef="let user"> {{user.status}} </mat-cell>
    </ng-container>

    <!-- Online Column -->
    <ng-container matColumnDef="is_online">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Online </mat-header-cell>
      <mat-cell *matCellDef="let user"> {{user.is_online ? 'Yes' : 'No'}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="role_code">
      <mat-header-cell *matHeaderCellDef mat-sort-header> role_code </mat-header-cell>
      <mat-cell *matCellDef="let user"> {{user.role_code}} </mat-cell>
    </ng-container>

    <!-- Created At Column -->
    <!-- <ng-container matColumnDef="created_at">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Created At </mat-header-cell>
      <mat-cell *matCellDef="let user"> {{user.created_at | date:'short'}} </mat-cell>
    </ng-container> -->

    <!-- Actions Column -->
    <ng-container matColumnDef="actions">
      <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
      <mat-cell *matCellDef="let user">
        <button mat-icon-button color="primary" (click)="editUser(user)">
          <mat-icon>edit</mat-icon>
        </button>
      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>

  </mat-table>

  <mat-progress-bar *ngIf="isLoading" mode="indeterminate" color="primary"></mat-progress-bar>
  <mat-paginator [pageSizeOptions]="[5, 10, 20, 30]" showFirstLastButtons></mat-paginator>

</section>