<section class="section" (scroll)="onScroll($event)">
    <mat-card class="header-gradient">
        <div class="gradient-bar"></div>
        <mat-card-title class="gradient-title">Based on Recent Activity</mat-card-title>
    </mat-card>
    <!-- Skeleton Loader -->
    <div *ngIf="isLoading; else recentActivityList" class="skeleton-list">
        <mat-card class="suggestion-card" *ngFor="let _ of skeletonRows">
            <div class="skeleton skeleton-img"></div>
            <div class="skeleton skeleton-text"></div>
            <div class="skeleton skeleton-subtext"></div>
            <div class="skeleton skeleton-button"></div>
        </mat-card>
    </div>

    <ng-template #recentActivityList>
        <p class="no-data" *ngIf="!peopleRecentActivity || peopleRecentActivity.length === 0">
            No data found
        </p>

        <div class="suggestions">
            <mat-card class="suggestion-card" *ngFor="let person of peopleRecentActivity">
                <!-- Close Button -->
                <button mat-icon-button class="close-button">
                    <mat-icon>close</mat-icon>
                </button>

                <!-- Profile Image -->
                <div class="profile-image-container">
                    <a [routerLink]="['/profile', person.code]" class="profile-link" [attr.alt]="person.fullname">
                        <img [src]="person.photo_pic || 'assets/default-avatar.png'" [alt]="person.fullname"
                            class="profile-image" />
                    </a>
                </div>

                <!-- Name & Role -->
                <ng-container *ngIf="person.role_code === 'DEF-USERS'; else companyLink">
                    <a [routerLink]="['/profile', person.code]" class="custom-title">{{ person.fullname }}</a>
                </ng-container>
                <ng-template #companyLink>
                    <a [routerLink]="['/client_profile', person.code]" class="custom-title">{{ person.fullname }}</a>
                </ng-template>

                <!-- Profession & Source -->
                <mat-card-subtitle>{{ person.profession || '--' }}</mat-card-subtitle>
                <p class="based-text">Based on your recent {{ person.source }}</p>

                <!-- Connect Button -->
                <div class="client-action" *ngIf="currentUserCode !== person.code">
                    <button mat-flat-button [color]="
            person.follow_status === 'accepted' ? 'accent' :
            person.follow_status === 'pending' ? 'warn' :
            person.follow_status === 'connect_back' ? 'primary' :
            'primary'" class="connect-btn" [ngClass]="person.follow_status"
                        (click)="AddConnect(person.code, person.fullname, person.follow_status, person.id)">

                        <!-- Icon based on status -->
                        <mat-icon *ngIf="person.follow_status === 'not_following'">person_add</mat-icon>
                        <mat-icon *ngIf="person.follow_status === 'pending'"
                            class="hourglass-animated">hourglass_top</mat-icon>
                        <mat-icon *ngIf="person.follow_status === 'accepted'">check_circle</mat-icon>
                        <mat-icon *ngIf="person.follow_status === 'connect_back'">autorenew</mat-icon>
                        <!-- icon for connect back -->

                        <!-- Button label -->
                        <span class="btn-label">
                            {{
                            person.follow_status === 'not_following' ? 'Connect' :
                            person.follow_status === 'pending' ? 'Pending' :
                            person.follow_status === 'accepted' ? 'Connected' :
                            person.follow_status === 'connect_back' ? 'Connect Back' : ''
                            }}
                        </span>
                    </button>
                </div>


                <!-- <button mat-flat-button   class="connect-btn"
                    [color]="person.follow_status === 'accepted' ? 'accent' : person.follow_status === 'pending' ? 'warn' : 'primary'"
                    *ngIf="currentUserCode !== person.code"
                    (click)="AddConnect(person.code, person.fullname, person.follow_status, person.id)">

                    <mat-icon *ngIf="person.follow_status === 'not_following'">person_add</mat-icon>
                    <mat-icon *ngIf="person.follow_status === 'pending'"
                        class="hourglass-animated">hourglass_top</mat-icon>
                    <mat-icon *ngIf="person.follow_status === 'accepted'">check_circle</mat-icon>

                    <ng-container [ngSwitch]="person.follow_status">
                        <span *ngSwitchCase="'not_following'">Connect</span>
                        <span *ngSwitchCase="'pending'">Pending</span>
                        <span *ngSwitchCase="'accepted'">Connected</span>
                    </ng-container>
                </button> -->
            </mat-card>
        </div>
    </ng-template>
</section>